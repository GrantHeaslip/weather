<%- include('includes/layout/top') %>
<section id="current">
    <div
        class="
            icon-container
        "
        style="background-color: <%= getTemperatureCssColor(data.current.temperature) %>;"
    >
        <img
            class="
                <% if (Math.abs(data.current.temperature) > colorInvertThreshold) { %>
                    dark
                <% } %>
                icon
            "
            src="<%= staticPath(data.current.climaconSrc) %>"
        />
    </div>
    <div class="text-container">
        <select>
            <% for (const [citySlug, cityName] of Object.entries(cityNamesBySlug)) { %>
                <option
                    <% if (citySlug === currentCitySlug) { %>
                        selected
                    <% } %>
                    value="<%= citySlug %>"
                ><%= cityName %></option>
            <% } %>
        </select>
        <p class="temp" id="current-temp"><%= data.current.temperature %>Â°C</p>
        <p class="description" id="current-description"><%= data.current.description %></p>
    </div>
</section>
<section id="forecasts">
    <table>
        <thead>
            <tr>
                <th class="icon"></th>
                <th class="datetime">Date</th>
                <th class="low">Low</th>
                <th class="high">High</th>
                <th class="pop">POP</th>
                <th class="description">Description</th>
            </tr>
        </thead>
        <tbody>
            <% for (const forecast of data.forecasts) { %>
                <tr>
                    <td class="icon">
                        <div class="icon-container">
                            <img
                                class="icon"
                                src="<%= staticPath(forecast.climaconSrc) %>"
                            />
                        </div>
                    </td>
                    <td class="datetime"><%= forecast.datetime %></td>
                    <% if (typeof forecast.low !== 'undefined') { %>
                        <td
                            class="
                                <% if (Math.abs(data.current.temperature) > colorInvertThreshold) { %>
                                    dark
                                <% } %>
                                low
                            "
                            style="background-color: <%= getTemperatureCssColor(forecast.low) %>;"
                        ><%= forecast.low %></td>
                    <% } else { %>
                        <td class="low"></td>
                    <% } %>

                    <td class="high"></td>
                    <td class="pop"></td>
                    <td class="description"><%= forecast.description %></td>
                </tr>
            <% } %>
        </tbody>
    </table>
</section>
<footer>
    <p>Developed by <a href="http://grant.heaslip.me/">Grant Heaslip</a>. <a id="weather-page-link" href="http://weather.gc.ca/canada_e.html">Data</a> from <a href="http://weather.gc.ca/business/index_e.html#rss">Environment Canada</a> via <a href="https://developer.yahoo.com/yql/">YQL</a>. <a href="http://adamwhitcroft.com/climacons/">Icons by Adam Whitcroft</a>.</p>
</footer>
<%- include('includes/layout/bottom') %>
